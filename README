Задача

Не ожидаем production-ready решения. Сделайте, как кажется правильным, опишите процесс поиска и принятые решения.

Опишите решение для веб-приложения в kubernetes в виде yaml-манифеста. Оставляйте в коде комментарии по принятым решениям. Есть следующие вводные:

- у нас мультизональный кластер (три зоны), в котором пять нод
- приложение требует около 5-10 секунд для инициализации
- по результатам нагрузочного теста известно, что 4 пода справляются с пиковой нагрузкой
- на первые запросы приложению требуется значительно больше ресурсов CPU, в дальнейшем потребление ровное в районе 0.1 CPU. По памяти всегда “ровно” в районе 128M memory
- приложение имеет дневной цикл по нагрузке – ночью запросов на порядки меньше, пик – днём
- хотим максимально отказоустойчивый deployment
- хотим минимального потребления ресурсов от этого deployment’а

---

Task

We do not expect a production-ready solution. Do what seems right, describe the search process and the decisions you've made.

Describe the solution for the kubernetes web application in the form of a yaml manifest. Leave comments on the decisions made in the code. There are the following introductory:

- we have a multi-zone cluster (three zones) with five nodes.
- The application takes about 5-10 seconds to initialize
- according to the results of the load test, it is known that 4 hearths can cope with peak load
- the application requires significantly more CPU resources for the first requests, and further consumption is steady around 0.1 CPU. From memory, it is always “exactly” in the region of 128M memory
- the application has a daily load cycle – there are orders of magnitude fewer requests at night, and a peak during the day
- we want the most fault-tolerant deployment
- we want minimal resource consumption from this deployment